<!DOCTYPE html>
<html>

<head>
    <title>myGame</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Press+Start+2P&family=VT323&display=swap"
        rel="stylesheet">
    
    <!-- CRITICAL: Capture message ID BEFORE any redirects or module loading -->
    <script>
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            let id = urlParams.get('id');
            if (!id && window.location.hash) {
                const hash = window.location.hash.startsWith('#')
                    ? window.location.hash.substring(1)
                    : window.location.hash;
                const hashParams = new URLSearchParams(hash);
                id = hashParams.get('id');
            }
        })();
    </script>
    
    <script src="/env.js?v=1"></script>

    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: "IBM Plex Mono", system-ui, -apple-system, sans-serif;
        }

        #orientation-warning {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 9999;
            justify-content: center;
            align-items: center;
            padding: 24px;
            box-sizing: border-box;
            background: radial-gradient(circle at top, rgba(47, 65, 122, 0.9), rgba(8, 10, 25, 0.96));
            color: #f4f6ff;
        }

        .warning-card {
            width: min(560px, 100%);
            border-radius: 18px;
            padding: 28px;
            background: rgba(11, 17, 42, 0.88);
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 14px 60px rgba(5, 7, 22, 0.4);
        }

        .warning-title {
            margin: 0 0 14px;
            font-size: clamp(1.25rem, 2.5vw, 1.65rem);
        }

        .warning-text {
            margin: 0 0 14px;
            line-height: 1.55;
            color: #d8dcf5;
        }

        .warning-list {
            margin: 0;
            padding-left: 20px;
            line-height: 1.65;
            color: #eef1ff;
        }

        .warning-note {
            margin-top: 14px;
            color: #aeb6e8;
            font-size: 0.9rem;
        }

        #skip-warning {
            margin-top: 20px;
            width: 100%;
            padding: 12px 16px;
            font-size: 1rem;
            border: none;
            border-radius: 10px;
            color: #ffffff;
            background: linear-gradient(135deg, #ff69b4, #fa4f7a);
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
            box-shadow: 0 8px 24px rgba(250, 79, 122, 0.35);
        }

        #skip-warning:hover {
            transform: translateY(-1px);
        }
    </style>
</head>

<body>
    <div id="orientation-warning">
        <div class="warning-card">
            <h1 class="warning-title">âœ¨ Better in Landscape</h1>
            <p class="warning-text">
                This game is built for wider screens so controls and obstacles are easier to follow.
            </p>
            <ul class="warning-list">
                <li>On phones/tablets, rotate to landscape (horizontal).</li>
                <li>On laptops/desktops, expand the browser window if it looks cramped.</li>
            </ul>
            <p class="warning-note">
                You can still continue in the current view.
            </p>
            <button id="skip-warning">
                Play Anyway
            </button>
        </div>
    </div>

    <script>
        let userSkippedWarning = false;

        function checkOrientation() {
            const warning = document.getElementById('orientation-warning');
            const isPortrait = window.innerHeight > window.innerWidth;
            const isSmallScreen = window.innerWidth < 900;

            if ((isPortrait || isSmallScreen) && !userSkippedWarning) {
                warning.style.display = 'flex';
            } else {
                warning.style.display = 'none';
            }
        }

        // Skip button handler
        document.getElementById('skip-warning').addEventListener('click', function () {
            userSkippedWarning = true;
            document.getElementById('orientation-warning').style.display = 'none';
        });

        // Check on load
        checkOrientation();

        // Check on resize and orientation change
        window.addEventListener('resize', checkOrientation);
        window.addEventListener('orientationchange', checkOrientation);
    </script>

    <script src="src/main.js" type="module"></script>
</body>

</html>
